{"version":3,"sources":["components/slide-content/slide-content.tsx","components/slider/slides.ts","components/slider/slider.tsx","components/header/header.tsx","components/main-block/main-block.tsx","components/footer/footer.tsx","components/pages/start-page/start-page.tsx","api/geocoder-api.ts","components/map-widget/map-widget.tsx","store/types.ts","api/api-factory.ts","store/actions.ts","utils/utils.ts","store/selectors.ts","components/step-two/model-option-enum.ts","components/step-one/step-one.tsx","components/order-details/order-buttons.ts","components/modal/modal.tsx","components/order-details/order-details.tsx","components/car-card/car-card.tsx","components/model-grid/model-grid.tsx","components/custom-radio/custom-radio.tsx","components/step-two/step-two.tsx","components/custom-checkbox/custom-checkbox.tsx","components/additional-rate-picker/additional-rate-picker.tsx","components/rate-picker/rate-picker.tsx","components/color-picker/color-picker.tsx","components/date-time-picker/date-time-picker.tsx","components/step-three/step-three.tsx","components/step-four/step-four.tsx","components/pages/order-page/order-page.tsx","components/burger-menu/burger-menu.tsx","components/menu/menu.tsx","components/pages/final-page/final-page.tsx","App.tsx","reportWebVitals.ts","store/locationReducer.ts","store/modelReducer.ts","store/orderReducer.ts","store/rootReducer.ts","store/store.ts","index.tsx"],"names":["SlideContent","title","description","buttonClass","btnClass","classNames","className","slides","image","Slider","renderedSlides","map","slide","data-src","animation","Header","MainBlock","to","Footer","StartPage","requestCoords","geocode","a","fetch","process","response","ok","json","coords","GeoObjectCollection","featureMember","GeoObject","Point","pos","split","Number","parseFloat","pointSelector","state","location","point","citySelector","city","MapWidget","points","useSelector","useState","placeMarks","setPlaceMarks","useEffect","coordsRequests","name","address","Promise","all","then","center","zoom","position","setPosition","query","apikey","placeMark","geometry","SET_CITY","SET_POINT","FETCH_CITIES","FETCH_POINTS","FETCH_CARS","FETCH_RATES","SET_MODEL","SET_COLOR","SET_RATE","SET_FULL_TANK","SET_CHILD_CHAIR","SET_RIGHT_WHEEL","SET_DATE_FROM","SET_DATE_TO","CHANGE_STAGE","SET_AVAILABLE","SET_PRICE","baseUrl","dbUrl","corsUrl","headers","getInit","method","postInit","loadCities","loadPoints","loadCars","loadRates","loadCarImage","path","blob","request","body","JSON","stringify","id","setCity","type","payload","setPoint","setColor","color","setPrice","price","setRate","rate","setFullTank","value","setChildChair","setRightWheel","setDateFrom","setDateTo","changeStage","setAvailable","setModel","car","prettifyPrice","num","toString","join","customFilter","options","length","values","option","results","Fuzzy","filter","result","string","includes","ModelOptionEnum","modelSelector","model","colorSelector","order","rateSelector","priceSelector","dateFromSelector","dateFrom","dateToSelector","dateTo","fullTankSelector","isFullTank","childChairSelector","isNeedChildChair","rightWheelSelector","isRightWheel","cityNameSelector","addressSelector","availableSelector","available","citiesSelector","cities","pointsSelector","carsSelector","cars","carIdSelector","ratesSelector","rates","orderSelector","StepOne","storedCity","storedPoint","dispatch","useDispatch","filteredPoints","setFilteredPoints","data","newFilteredPoints","cityId","resetFields","useCallback","rateTypeId","unit","changeCity","changePoint","newCity","find","displayOption","filterOption","maxVisible","customClasses","input","listItem","onOptionSelected","searchOptions","placeholder","orderButtons","Map","Modal","isHidden","onAccept","onDecline","modalClass","onClick","OrderDetails","stage","totalPrice","history","useHistory","isPriceOK","setPriceOK","hidden","setHidden","button__disabled","button__red","priceClass","price__red","changeModalVisibility","prev","onModalAccept","makeOrder","orderStatusId","pointId","carId","valueOf","rateId","res","push","onModalDecline","rentTime","useMemo","moment","diff","finalPrice","stringPrice","units","startPrice","time","Math","max","isResultPriceOK","priceMax","priceMin","handleNextButtonClick","disabled","get","CarCard","itemClass","imgSrc","setImgSrc","thumbnail","URL","createObjectURL","data-id","src","alt","ModelGrid","filteredCars","handleCardClick","carCards","CustomRadio","defaultChecked","text","htmlFor","StepTwo","storedCar","modelOption1","modelOption","setModelOption","setFilteredCars","e","modelItem","target","closest","dataId","getAttribute","modelOption2","categoryId","modelOption3","handleChangeValue","parseInt","onChange","CustomCheckbox","checked","isRightWheelSelector","isNeedChildChairSelector","isFullTankSelector","AdditionalRatePicker","RatePicker","selectedRate","rateOptions","index","Fragment","ColorPicker","selectedColor","colorOptions","colors","concat","DateTimePicker","startDate","endDate","handleChangeStartDate","date","handleChangeEndDate","dateFormat","timeFormat","inputProps","StepThree","handleColorChangeValue","floor","random","handleChangeAdditionalRateValue","handleChangeRateValue","replace","StepFour","number","format","stageSelector","OrderPage","tabIndex","setTabIndex","handleTabSelect","selectedIndex","onSelect","default","selectedClassName","disabledClassName","selected","BurgerMenu","isActive","changeActive","Menu","props","isOpen","href","FinalPage","orderId","useParams","getOrder","App","showMenu","setShowMenu","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","locationReducer","action","tank","mimetype","originalname","modelReducer","orderReducer","rootReducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8b1bd1f3.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./slide-content.scss\";\r\nimport classNames from \"classnames\";\r\n\r\ninterface SlideContentProps {\r\n  title: string;\r\n  description: string;\r\n  buttonClass: string;\r\n}\r\n\r\nconst SlideContent = ({\r\n  title,\r\n  description,\r\n  buttonClass,\r\n}: SlideContentProps) => {\r\n  const btnClass = classNames(\"button\", \"button__medium\", buttonClass);\r\n  return (\r\n    <>\r\n      <h2 className=\"slider-content_title\">{title}</h2>\r\n      <p className=\"slider-content_description\">{description}</p>\r\n      <button className={btnClass}>Подробнее</button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SlideContent;\r\n","const slides = [\r\n  {\r\n    image: \"./assets/slider1.png\",\r\n    title: \"Бесплатная парковка\",\r\n    description: `Оставляйте машину на платных городских парковках и разрешенных местах,\r\n        не нарушая ПДД, а также в аэропортах.`,\r\n    buttonClass: \"button__green\",\r\n  },\r\n  {\r\n    image: \"./assets/slider2.png\",\r\n    title: \"Страховка\",\r\n    description: `Полная страховка автомобиля`,\r\n    buttonClass: \"button__blue\",\r\n  },\r\n  {\r\n    image: \"./assets/slider3.png\",\r\n    title: \"Бензин\",\r\n    description: `Полный бак на любой заправке города за наш счёт`,\r\n    buttonClass: \"button__red\",\r\n  },\r\n  {\r\n    image: \"./assets/slider4.png\",\r\n    title: \"Обслуживание\",\r\n    description: `Автомобиль проходит еженедельное ТО`,\r\n    buttonClass: \"button__purple\",\r\n  },\r\n];\r\n\r\nexport default slides;\r\n","import React from \"react\";\r\nimport AwesomeSlider from \"react-awesome-slider\";\r\nimport \"react-awesome-slider/dist/styles.css\";\r\nimport \"./slider.scss\";\r\nimport SlideContent from \"../slide-content/slide-content\";\r\nimport slides from \"./slides\";\r\n\r\nconst Slider = () => {\r\n  const renderedSlides = slides.map((slide) => (\r\n    <div className=\"slider-content\" data-src={slide.image}>\r\n      <SlideContent\r\n        title={slide.title}\r\n        description={slide.description}\r\n        buttonClass={slide.buttonClass}\r\n      />\r\n    </div>\r\n  ));\r\n  return (\r\n    <AwesomeSlider className=\"slider\" animation=\"\">\r\n      {renderedSlides}\r\n    </AwesomeSlider>\r\n  );\r\n};\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nimport \"./header.scss\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <h2 className=\"header_logo\">Need for drive</h2>\r\n      <div className=\"header_location\">\r\n        <span className=\"location\" />\r\n        <span>Ульяновск</span>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport \"./main-block.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst MainBlock = () => {\r\n  return (\r\n    <main className=\"main-info\">\r\n      <div className=\"main-info_container\">\r\n        <div className=\"main-info_container-text\">\r\n          <h1 className=\"main-info_title\">Каршеринг</h1>\r\n          <h2 className=\"main-info_title main-info_title__accent\">\r\n            Need for drive\r\n          </h2>\r\n          <span className=\"main-info_description\">\r\n            Поминутная аренда авто твоего города\r\n          </span>\r\n        </div>\r\n        <Link to=\"/car-sharing/order\">\r\n          <button className=\"button button__wide\">Забронировать</button>\r\n        </Link>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MainBlock;\r\n","import React from \"react\";\r\nimport \"./footer.scss\";\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <span className=\"footer_copyright\">© 2016-2019 «Need for drive»</span>\r\n      <span className=\"footer_phone\">8 (495) 234-22-44</span>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport \"./start-page.scss\";\r\nimport Slider from \"../../slider/slider\";\r\nimport Header from \"../../header/header\";\r\nimport MainBlock from \"../../main-block/main-block\";\r\nimport Footer from \"../../footer/footer\";\r\n\r\nconst StartPage = () => {\r\n  return (\r\n    <div className=\"start-page-container\">\r\n      <div className=\"main-page\">\r\n        <Header />\r\n        <MainBlock />\r\n        <Footer />\r\n      </div>\r\n      <div className=\"slider-container\">\r\n        <Slider />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StartPage;\r\n","export async function requestCoords(geocode: string) {\r\n  const response = await fetch(\r\n    `https://geocode-maps.yandex.ru/1.x/?apikey=${process.env.REACT_APP_MAP_KEY}&geocode=${geocode}&format=json`\r\n  );\r\n\r\n  if (response.ok) {\r\n    const json = await response.json();\r\n    const coords = json.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(\r\n      \" \"\r\n    );\r\n    return [Number.parseFloat(coords[1]), Number.parseFloat(coords[0])];\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./map-widget.scss\";\r\nimport { Map, Placemark, YMaps } from \"react-yandex-maps\";\r\nimport { LocationState } from \"../../store/locationReducer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { requestCoords } from \"../../api/geocoder-api\";\r\nimport IPoint from \"../../store/interfaces/i-point\";\r\n\r\ninterface MapWidgetState {\r\n  location: LocationState;\r\n}\r\n\r\nconst pointSelector = (state: MapWidgetState) => state.location.point;\r\nconst citySelector = (state: MapWidgetState) => state.location.city;\r\n\r\ninterface MapWidgetProps {\r\n  points: IPoint[];\r\n}\r\n\r\nconst MapWidget = ({ points }: MapWidgetProps) => {\r\n  const point = useSelector(pointSelector);\r\n  const city = useSelector(citySelector);\r\n  const [placeMarks, setPlaceMarks] = useState([[0, 0]]);\r\n  useEffect(() => {\r\n    const coordsRequests = points.map((point) =>\r\n      requestCoords(`${city.name}, ${point.address}`)\r\n    );\r\n\r\n    Promise.all(coordsRequests).then((coordsRequests) => {\r\n      // @ts-ignore\r\n      setPlaceMarks(coordsRequests);\r\n    });\r\n  }, [city.name, points]);\r\n\r\n  const [position, setPosition] = useState({\r\n    center: [54.3, 48.3],\r\n    zoom: 10,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (city.name && point.address) {\r\n      requestCoords(`${city.name}, ${point.address}`).then((coords) => {\r\n        if (coords) {\r\n          setPosition({\r\n            center: coords,\r\n            zoom: 16,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }, [city.name, point.address]);\r\n  return (\r\n    <div className=\"order_map_container\">\r\n      <span>Выбрать на карте:</span>\r\n      <YMaps query={{ apikey: process.env.REACT_APP_MAP_KEY }}>\r\n        <Map className=\"order_map\" state={position}>\r\n          {placeMarks.map((placeMark) => (\r\n            <Placemark geometry={placeMark} />\r\n          ))}\r\n        </Map>\r\n      </YMaps>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapWidget;\r\n","export const SET_CITY = \"LOCATION/SET_CITY\";\r\nexport const SET_POINT = \"LOCATION/SET_POINT\";\r\nexport const FETCH_CITIES = \"LOCATION/FETCH_CITIES\";\r\nexport const FETCH_POINTS = \"LOCATION/FETCH_POINTS\";\r\nexport const FETCH_CARS = \"MODEL/FETCH_CARS\";\r\nexport const FETCH_RATES = \"MODEL/FETCH_RATES\";\r\nexport const SET_MODEL = \"MODEL/SET_MODEL\";\r\nexport const SET_COLOR = \"ORDER/SET_COLOR\";\r\nexport const SET_RATE = \"ORDER/SET_RATE\";\r\nexport const SET_FULL_TANK = \"ORDER/SET_FULL_TANK\";\r\nexport const SET_CHILD_CHAIR = \"ORDER/SET_CHILD_CHAIR\";\r\nexport const SET_RIGHT_WHEEL = \"ORDER/SET_RIGHT_WHEEL\";\r\nexport const SET_DATE_FROM = \"ORDER/SET_DATE_FROM\";\r\nexport const SET_DATE_TO = \"ORDER/SET_DATE_TO\";\r\nexport const CHANGE_STAGE = \"ORDER/CHANGE_STAGE\";\r\nexport const SET_AVAILABLE = \"ORDER/SET_AVAILABLE\";\r\nexport const SET_PRICE = \"ORDER/SET_PRICE\";\r\n","const baseUrl = \"http://api-factory.simbirsoft1.com\";\r\nconst dbUrl = \"http://api-factory.simbirsoft1.com/api/db/\";\r\nconst corsUrl = \"https://cors-anywhere.herokuapp.com/\";\r\nconst headers = {\r\n  \"X-Api-Factory-Application-Id\": \"5e25c641099b810b946c5d5b\",\r\n};\r\nconst getInit = {\r\n  method: \"GET\",\r\n  headers,\r\n};\r\nconst postInit = {\r\n  method: \"POST\",\r\n  headers: { ...headers, \"Content-Type\": \"application/json;charset=utf-8\" },\r\n};\r\n\r\nexport async function loadCities() {\r\n  const response = await fetch(`${corsUrl}${dbUrl}city`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport async function loadPoints() {\r\n  const response = await fetch(`${corsUrl}${dbUrl}point`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport async function loadCars() {\r\n  const response = await fetch(`${corsUrl}${dbUrl}car?limit=6`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport async function loadRates() {\r\n  const response = await fetch(`${corsUrl}${dbUrl}rate`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport async function loadCarImage(path: string) {\r\n  const response = await fetch(`${corsUrl}${baseUrl}${path}`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.blob();\r\n  }\r\n}\r\n\r\nexport async function makeOrder(request: any) {\r\n  const response = await fetch(`${corsUrl}${dbUrl}order`, {\r\n    ...postInit,\r\n    body: JSON.stringify(request),\r\n  });\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport async function getOrder(id: string) {\r\n  const response = await fetch(`${corsUrl}${dbUrl}order/${id}`, getInit);\r\n\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n}\r\n","import {\r\n  CHANGE_STAGE,\r\n  FETCH_CARS,\r\n  FETCH_CITIES,\r\n  FETCH_POINTS,\r\n  FETCH_RATES,\r\n  SET_AVAILABLE,\r\n  SET_CHILD_CHAIR,\r\n  SET_CITY,\r\n  SET_COLOR,\r\n  SET_DATE_FROM,\r\n  SET_DATE_TO,\r\n  SET_FULL_TANK,\r\n  SET_MODEL,\r\n  SET_POINT,\r\n  SET_PRICE,\r\n  SET_RATE,\r\n  SET_RIGHT_WHEEL,\r\n} from \"./types\";\r\nimport {\r\n  loadCars,\r\n  loadCities,\r\n  loadPoints,\r\n  loadRates,\r\n} from \"../api/api-factory\";\r\nimport { Dispatch } from \"react\";\r\nimport IAction from \"./interfaces/i-action\";\r\nimport ICar from \"./interfaces/i-car\";\r\nimport IRate from \"./interfaces/i-rate\";\r\nimport ICity from \"./interfaces/i-city\";\r\nimport IPoint from \"./interfaces/i-point\";\r\nimport { Moment } from \"moment\";\r\n\r\nexport function setCity(city: ICity | undefined) {\r\n  return {\r\n    type: SET_CITY,\r\n    payload: city,\r\n  };\r\n}\r\n\r\nexport function setPoint(point: IPoint) {\r\n  return {\r\n    type: SET_POINT,\r\n    payload: point,\r\n  };\r\n}\r\n\r\nexport function setColor(color: string) {\r\n  return {\r\n    type: SET_COLOR,\r\n    payload: color,\r\n  };\r\n}\r\n\r\nexport function setPrice(price: number) {\r\n  return {\r\n    type: SET_PRICE,\r\n    payload: price,\r\n  };\r\n}\r\n\r\nexport function setRate(rate: IRate) {\r\n  return {\r\n    type: SET_RATE,\r\n    payload: rate,\r\n  };\r\n}\r\n\r\nexport function setFullTank(value: boolean) {\r\n  return {\r\n    type: SET_FULL_TANK,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function setChildChair(value: boolean) {\r\n  return {\r\n    type: SET_CHILD_CHAIR,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function setRightWheel(value: boolean) {\r\n  return {\r\n    type: SET_RIGHT_WHEEL,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function setDateFrom(value: string | Moment) {\r\n  return {\r\n    type: SET_DATE_FROM,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function setDateTo(value: string | Moment) {\r\n  return {\r\n    type: SET_DATE_TO,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function changeStage(value: number) {\r\n  return {\r\n    type: CHANGE_STAGE,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function setAvailable(value: boolean) {\r\n  return {\r\n    type: SET_AVAILABLE,\r\n    payload: value,\r\n  };\r\n}\r\n\r\nexport function fetchCities() {\r\n  return async (dispatch: Dispatch<IAction>) => {\r\n    const response = await loadCities();\r\n    dispatch({ type: FETCH_CITIES, payload: response.data });\r\n  };\r\n}\r\n\r\nexport function fetchPoints() {\r\n  return async (dispatch: Dispatch<IAction>) => {\r\n    const response = await loadPoints();\r\n    dispatch({ type: FETCH_POINTS, payload: response.data });\r\n  };\r\n}\r\n\r\nexport function fetchCars() {\r\n  return async (dispatch: Dispatch<IAction>) => {\r\n    const response = await loadCars();\r\n    dispatch({ type: FETCH_CARS, payload: response.data });\r\n  };\r\n}\r\n\r\nexport function fetchRates() {\r\n  return async (dispatch: Dispatch<IAction>) => {\r\n    const response = await loadRates();\r\n    dispatch({ type: FETCH_RATES, payload: response.data });\r\n  };\r\n}\r\n\r\nexport function setModel(car: ICar | undefined) {\r\n  return {\r\n    type: SET_MODEL,\r\n    payload: car,\r\n  };\r\n}\r\n","import Fuzzy from \"fuzzy\";\r\n\r\nexport function prettifyPrice(num: number) {\r\n  const n = num.toString();\r\n  return n.split(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g).join(\" \");\r\n}\r\n\r\nexport function customFilter(value: string, options: any[]) {\r\n  if (value.length < 2) return [];\r\n  const values = options.map((option) => option.name);\r\n  const results = Fuzzy.filter(value, values).map((result) => result.string);\r\n  return options.filter((option) => results.includes(option.name));\r\n}\r\n","import { ModelState } from \"./modelReducer\";\r\nimport { OrderState } from \"./orderReducer\";\r\nimport { LocationState } from \"./locationReducer\";\r\n\r\ninterface SelectorsState {\r\n  model: ModelState;\r\n  order: OrderState;\r\n  location: LocationState;\r\n}\r\n\r\nexport const modelSelector = (state: SelectorsState) => state.model.model;\r\nexport const colorSelector = (state: SelectorsState) => state.order.color;\r\nexport const rateSelector = (state: SelectorsState) => state.order.rate;\r\nexport const priceSelector = (state: SelectorsState) => state.order.price;\r\nexport const dateFromSelector = (state: SelectorsState) => state.order.dateFrom;\r\nexport const dateToSelector = (state: SelectorsState) => state.order.dateTo;\r\nexport const fullTankSelector = (state: SelectorsState) =>\r\n  state.order.isFullTank;\r\nexport const childChairSelector = (state: SelectorsState) =>\r\n  state.order.isNeedChildChair;\r\nexport const rightWheelSelector = (state: SelectorsState) =>\r\n  state.order.isRightWheel;\r\nexport const cityNameSelector = (state: SelectorsState) =>\r\n  state.location.city.name;\r\nexport const citySelector = (state: SelectorsState) => state.location.city;\r\nexport const pointSelector = (state: SelectorsState) => state.location.point;\r\nexport const addressSelector = (state: SelectorsState) =>\r\n  state.location.point.address;\r\nexport const availableSelector = (state: SelectorsState) =>\r\n  state.order.available;\r\nexport const citiesSelector = (state: SelectorsState) => state.location.cities;\r\nexport const pointsSelector = (state: SelectorsState) => state.location.points;\r\nexport const carsSelector = (state: SelectorsState) => state.model.cars;\r\nexport const carIdSelector = (state: SelectorsState) => state.model.model.id;\r\nexport const ratesSelector = (state: SelectorsState) => state.model.rates;\r\nexport const orderSelector = (state: SelectorsState) => state.order;\r\n","enum ModelOptionEnum {\r\n  modelOption1,\r\n  modelOption2,\r\n  modelOption3,\r\n}\r\n\r\nexport default ModelOptionEnum;\r\n","import { OptionsObject, Typeahead } from \"@gforge/react-typeahead-ts\";\r\nimport MapWidget from \"../map-widget/map-widget\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport {\r\n  changeStage,\r\n  fetchCities,\r\n  fetchPoints,\r\n  setAvailable,\r\n  setChildChair,\r\n  setCity,\r\n  setColor,\r\n  setDateFrom,\r\n  setDateTo,\r\n  setFullTank,\r\n  setModel,\r\n  setPoint,\r\n  setRate,\r\n  setRightWheel,\r\n} from \"../../store/actions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ICity from \"../../store/interfaces/i-city\";\r\nimport IPoint from \"../../store/interfaces/i-point\";\r\nimport \"./step-one.scss\";\r\nimport { customFilter } from \"../../utils/utils\";\r\nimport ICar from \"../../store/interfaces/i-car\";\r\nimport IRateTypeId from \"../../store/interfaces/i-rate-type-id\";\r\nimport IRate from \"../../store/interfaces/i-rate\";\r\nimport {\r\n  citiesSelector,\r\n  citySelector,\r\n  pointSelector,\r\n  pointsSelector,\r\n} from \"../../store/selectors\";\r\n\r\nconst StepOne = () => {\r\n  const cities = useSelector(citiesSelector);\r\n  const points = useSelector(pointsSelector);\r\n  const storedCity = useSelector(citySelector);\r\n  const storedPoint = useSelector(pointSelector);\r\n  const dispatch = useDispatch();\r\n  const [filteredPoints, setFilteredPoints] = useState(points);\r\n\r\n  useEffect(() => {\r\n    if (!cities?.length || !points?.length) {\r\n      (async () => {\r\n        dispatch(fetchCities());\r\n        dispatch(fetchPoints());\r\n      })();\r\n    }\r\n  }, [cities?.length, dispatch, points?.length]);\r\n\r\n  useEffect(() => {\r\n    const newFilteredPoints = points.filter((point) => {\r\n      if (storedCity?.id) {\r\n        return point.cityId.id === storedCity.id;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n    setFilteredPoints(newFilteredPoints);\r\n  }, [storedCity, points]);\r\n\r\n  const resetFields = useCallback(() => {\r\n    dispatch(changeStage(1));\r\n    dispatch(setModel({ id: \"\", name: \"\" } as ICar));\r\n    dispatch(setColor(\"\"));\r\n    dispatch(setDateFrom(\"\"));\r\n    dispatch(setDateTo(\"\"));\r\n    dispatch(setRightWheel(false));\r\n    dispatch(setFullTank(false));\r\n    dispatch(setChildChair(false));\r\n    dispatch(\r\n      setRate({\r\n        price: 0,\r\n        rateTypeId: { name: \"\", unit: \"\" } as IRateTypeId,\r\n      } as IRate)\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const changeCity = useCallback(\r\n    (value: string | number | OptionsObject | undefined) => {\r\n      if (value) {\r\n        const city = value as ICity;\r\n        dispatch(setCity(city));\r\n        if (city.id !== storedCity.id) {\r\n          resetFields();\r\n        }\r\n      } else {\r\n        resetFields();\r\n      }\r\n    },\r\n    [dispatch, resetFields, storedCity.id]\r\n  );\r\n\r\n  const changePoint = useCallback(\r\n    (value: string | number | OptionsObject | undefined) => {\r\n      if (value) {\r\n        const point = value as IPoint;\r\n\r\n        dispatch(setPoint(point));\r\n        if (point.id !== storedPoint.id) {\r\n          resetFields();\r\n        }\r\n\r\n        const newCity = cities.find((city) => city.id === point.cityId.id);\r\n        if (newCity?.id !== storedCity?.id) {\r\n          dispatch(setCity(newCity));\r\n        }\r\n      } else {\r\n        resetFields();\r\n      }\r\n    },\r\n    [dispatch, storedPoint.id, cities, storedCity?.id, resetFields]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (storedCity.id && storedPoint.name) {\r\n      dispatch(setAvailable(true));\r\n    } else {\r\n      dispatch(setAvailable(false));\r\n    }\r\n  }, [storedCity.id, dispatch, storedPoint.name]);\r\n  return (\r\n    <div className=\"order_form-container\">\r\n      <form className=\"order_form\">\r\n        <label>Город</label>\r\n        <span className=\"clearable\">\r\n          <Typeahead\r\n            options={cities}\r\n            displayOption=\"name\"\r\n            filterOption=\"name\"\r\n            maxVisible={4}\r\n            customClasses={{ input: \"input\", listItem: \"listItem\" }}\r\n            value={storedCity.name}\r\n            onOptionSelected={changeCity}\r\n            searchOptions={customFilter}\r\n            placeholder=\"Начните вводить город...\"\r\n          />\r\n          <button className=\"icon-clear\" />\r\n        </span>\r\n        <label>Пункт выдачи</label>\r\n        <span className=\"clearable\">\r\n          <Typeahead\r\n            options={filteredPoints}\r\n            maxVisible={4}\r\n            displayOption=\"name\"\r\n            filterOption=\"name\"\r\n            customClasses={{ input: \"input\", listItem: \"listItem\" }}\r\n            value={storedPoint.name}\r\n            onOptionSelected={changePoint}\r\n            searchOptions={customFilter}\r\n            placeholder=\"Начните вводить пункт...\"\r\n          />\r\n          <button className=\"icon-clear\" />\r\n        </span>\r\n      </form>\r\n      <MapWidget points={filteredPoints} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepOne;\r\n","const orderButtons = new Map<number, string>([\r\n  [1, \"Выбрать модель\"],\r\n  [2, \"Дополнительно\"],\r\n  [3, \"Итого\"],\r\n  [4, \"Заказать\"],\r\n  [5, \"Отменить\"],\r\n]);\r\n\r\nexport default orderButtons;\r\n","import React from \"react\";\r\nimport \"./modal.scss\";\r\nimport classNames from \"classnames\";\r\n\r\ninterface ModalProps {\r\n  isHidden: boolean;\r\n  onAccept: () => void;\r\n  onDecline: () => void;\r\n}\r\n\r\nconst Modal = ({ isHidden, onAccept, onDecline }: ModalProps) => {\r\n  const modalClass = classNames(\"modal-window\", {\r\n    \"modal-window__hidden\": isHidden,\r\n  });\r\n  return (\r\n    <div className={modalClass}>\r\n      <div className=\"modal-window_content\">\r\n        <h4 className=\"modal-window_title\">Подтвердить заказ</h4>\r\n        <div className=\"modal-window_button-group\">\r\n          <button className=\"button button__medium\" onClick={onAccept}>\r\n            Подтвердить\r\n          </button>\r\n          <button\r\n            className=\"button button__medium button__red\"\r\n            onClick={onDecline}\r\n          >\r\n            Вернуться\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useCallback, useMemo, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"./order-details.scss\";\r\nimport { prettifyPrice } from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport classNames from \"classnames\";\r\nimport orderButtons from \"./order-buttons\";\r\nimport { changeStage, setPrice } from \"../../store/actions\";\r\nimport Modal from \"../modal/modal\";\r\nimport { makeOrder } from \"../../api/api-factory\";\r\nimport {\r\n  addressSelector,\r\n  availableSelector,\r\n  childChairSelector,\r\n  cityNameSelector,\r\n  citySelector,\r\n  colorSelector,\r\n  dateFromSelector,\r\n  dateToSelector,\r\n  fullTankSelector,\r\n  modelSelector,\r\n  pointSelector,\r\n  priceSelector,\r\n  rateSelector,\r\n  rightWheelSelector,\r\n} from \"../../store/selectors\";\r\n\r\ninterface OrderDetailsProps {\r\n  stage: number;\r\n}\r\n\r\nconst OrderDetails = ({ stage }: OrderDetailsProps) => {\r\n  const model = useSelector(modelSelector);\r\n  const totalPrice = useSelector(priceSelector);\r\n  const color = useSelector(colorSelector);\r\n  const rate = useSelector(rateSelector);\r\n  const dateFrom = useSelector(dateFromSelector);\r\n  const dateTo = useSelector(dateToSelector);\r\n  const city = useSelector(citySelector);\r\n  const point = useSelector(pointSelector);\r\n  const name = useSelector(cityNameSelector);\r\n  const address = useSelector(addressSelector);\r\n  const isFullTank = useSelector(fullTankSelector);\r\n  const isNeedChildChair = useSelector(childChairSelector);\r\n  const isRightWheel = useSelector(rightWheelSelector);\r\n  const available = useSelector(availableSelector);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const [isPriceOK, setPriceOK] = useState(false);\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  const buttonClass = classNames(\"button\", \"button__infinite\", {\r\n    button__disabled: !available,\r\n    button__red: stage === 5,\r\n  });\r\n\r\n  const priceClass = classNames({ price__red: !isPriceOK });\r\n\r\n  const changeModalVisibility = useCallback(() => {\r\n    setHidden((prev) => !prev);\r\n  }, []);\r\n\r\n  const onModalAccept = useCallback(() => {\r\n    const request = {\r\n      orderStatusId: \"5e26a191099b810b946c5d89\",\r\n      cityId: city.id,\r\n      pointId: point.id,\r\n      carId: model.id,\r\n      color,\r\n      dateFrom: dateFrom?.valueOf(),\r\n      dateTo: dateTo?.valueOf(),\r\n      rateId: rate.id,\r\n      price: totalPrice,\r\n      isFullTank,\r\n      isNeedChildChair,\r\n      isRightWheel,\r\n    };\r\n    makeOrder(request).then((res) => {\r\n      setHidden((prev) => !prev);\r\n      dispatch(changeStage(stage + 1));\r\n      history.push(`/order/${res.data.id}`);\r\n    });\r\n  }, [\r\n    city.id,\r\n    color,\r\n    dateFrom,\r\n    dateTo,\r\n    dispatch,\r\n    history,\r\n    isFullTank,\r\n    isNeedChildChair,\r\n    isRightWheel,\r\n    model.id,\r\n    point.id,\r\n    rate.id,\r\n    stage,\r\n    totalPrice,\r\n  ]);\r\n\r\n  const onModalDecline = useCallback(() => {\r\n    setHidden((prev) => !prev);\r\n  }, []);\r\n\r\n  const rentTime = useMemo(() => {\r\n    if (dateFrom && dateTo) {\r\n      return `${moment(dateTo).diff(moment(dateFrom), \"hours\")}ч`;\r\n    }\r\n  }, [dateFrom, dateTo]);\r\n\r\n  const finalPrice = useMemo(() => {\r\n    let price = totalPrice;\r\n    let stringPrice = \"\";\r\n    if (dateFrom && dateTo && rate?.price) {\r\n      const startPrice = rate.price;\r\n      const unit = rate.rateTypeId.unit;\r\n      let units: \"minutes\" | \"days\";\r\n      switch (unit) {\r\n        case \"мин\": {\r\n          units = \"minutes\";\r\n          break;\r\n        }\r\n        case \"сутки\": {\r\n          units = \"days\";\r\n          break;\r\n        }\r\n        default: {\r\n          units = \"minutes\";\r\n        }\r\n      }\r\n      let time = moment(dateTo).diff(moment(dateFrom), units);\r\n      if (units === \"days\") {\r\n        time = Math.max(time, 1);\r\n      }\r\n      price = startPrice * time;\r\n      if (isRightWheel) price += 1600;\r\n      if (isNeedChildChair) price += 200;\r\n      if (isFullTank) price += 500;\r\n    }\r\n\r\n    const isResultPriceOK =\r\n      price !== 0 && price < model?.priceMax && price > model?.priceMin;\r\n    setPriceOK(isResultPriceOK);\r\n\r\n    if (price && isResultPriceOK) {\r\n      stringPrice = `${prettifyPrice(price)} ₽`;\r\n      dispatch(setPrice(price));\r\n    } else if (model?.priceMax) {\r\n      dispatch(setPrice(0));\r\n      stringPrice = `от ${prettifyPrice(model.priceMin)} до ${prettifyPrice(\r\n        model.priceMax\r\n      )} ₽`;\r\n    }\r\n    return stringPrice;\r\n  }, [\r\n    totalPrice,\r\n    dateFrom,\r\n    dateTo,\r\n    rate.price,\r\n    rate.rateTypeId.unit,\r\n    model.priceMax,\r\n    model.priceMin,\r\n    isRightWheel,\r\n    isNeedChildChair,\r\n    isFullTank,\r\n    dispatch,\r\n  ]);\r\n\r\n  const handleNextButtonClick = useCallback(() => {\r\n    if (stage !== 4) {\r\n      dispatch(changeStage(stage + 1));\r\n    } else {\r\n      changeModalVisibility();\r\n    }\r\n  }, [changeModalVisibility, dispatch, stage]);\r\n  return (\r\n    <>\r\n      <Modal\r\n        isHidden={hidden}\r\n        onAccept={onModalAccept}\r\n        onDecline={onModalDecline}\r\n      />\r\n      <div className=\"order-details\">\r\n        <label>Ваш заказ:</label>\r\n        {name && (\r\n          <div className=\"order-details_row\">\r\n            <span>Пункт выдачи</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>{`${name}${address ? \",\" : \"\"}`}</span>\r\n              <span>{address}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {model.name && (\r\n          <div className=\"order-details_row\">\r\n            <span>Модель</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>{model.name}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {color && (\r\n          <div className=\"order-details_row\">\r\n            <span>Цвет</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>{color}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {rate?.rateTypeId?.name && (\r\n          <div className=\"order-details_row\">\r\n            <span>Тариф</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>{rate.rateTypeId.name}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isFullTank && (\r\n          <div className=\"order-details_row\">\r\n            <span>Полный бак</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>Да</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isNeedChildChair && (\r\n          <div className=\"order-details_row\">\r\n            <span>Детское кресло</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>Да</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isRightWheel && (\r\n          <div className=\"order-details_row\">\r\n            <span>Правый руль</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>Да</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {rentTime && (\r\n          <div className=\"order-details_row\">\r\n            <span>Длительность аренды</span>\r\n            <div />\r\n            <div className=\"order-details_value\">\r\n              <span>{rentTime}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {finalPrice && (\r\n          <p className={priceClass}>\r\n            <b>Цена:</b> {finalPrice}\r\n          </p>\r\n        )}\r\n        <button\r\n          className={buttonClass}\r\n          onClick={handleNextButtonClick}\r\n          disabled={!available}\r\n        >\r\n          {orderButtons.get(stage)}\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { prettifyPrice } from \"../../utils/utils\";\r\nimport \"./car-card.scss\";\r\nimport { loadCarImage } from \"../../api/api-factory\";\r\nimport ICar from \"../../store/interfaces/i-car\";\r\n\r\ninterface CarCardProps {\r\n  itemClass: string;\r\n  car: ICar;\r\n}\r\n\r\nconst CarCard = ({ itemClass, car }: CarCardProps) => {\r\n  const [imgSrc, setImgSrc] = useState(\"\");\r\n  useEffect(() => {\r\n    loadCarImage(car.thumbnail.path).then((blob) => {\r\n      setImgSrc(URL.createObjectURL(blob));\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className={itemClass} data-id={car.id}>\r\n      <h4>{car.name}</h4>\r\n      <p>\r\n        {prettifyPrice(car.priceMin)} - {prettifyPrice(car.priceMax)} ₽\r\n      </p>\r\n      <img src={imgSrc} alt=\"car\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarCard;\r\n","import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport \"./model-grid.scss\";\r\nimport CarCard from \"../car-card/car-card\";\r\nimport ICar from \"../../store/interfaces/i-car\";\r\n\r\ninterface ModelGridProps {\r\n  filteredCars: ICar[];\r\n  carId: string;\r\n  handleCardClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\r\n}\r\n\r\nconst ModelGrid = ({\r\n  filteredCars,\r\n  handleCardClick,\r\n  carId,\r\n}: ModelGridProps) => {\r\n  const carCards = filteredCars.map((car: ICar) => {\r\n    const itemClass = classNames(\"model-item\", {\r\n      \"model-item__selected\": carId === car.id,\r\n    });\r\n    return <CarCard key={car.id} itemClass={itemClass} car={car} />;\r\n  });\r\n  return (\r\n    <div className=\"model-grid\" onClick={handleCardClick}>\r\n      {carCards}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModelGrid;\r\n","import React from \"react\";\r\nimport \"./custom-radio.scss\";\r\n\r\ninterface CustomRadioProps {\r\n  name: string;\r\n  id: string;\r\n  defaultChecked: boolean;\r\n  text: string;\r\n}\r\n\r\nconst CustomRadio = ({ id, name, defaultChecked, text }: CustomRadioProps) => {\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"radio\"\r\n        className=\"custom-radio\"\r\n        name={name}\r\n        id={id}\r\n        defaultChecked={defaultChecked}\r\n      />\r\n      <label htmlFor={id}>{text}</label>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomRadio;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport {\r\n  changeStage,\r\n  fetchCars,\r\n  setAvailable,\r\n  setChildChair,\r\n  setColor,\r\n  setDateFrom,\r\n  setDateTo,\r\n  setFullTank,\r\n  setModel,\r\n  setRate,\r\n  setRightWheel,\r\n} from \"../../store/actions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ModelGrid from \"../model-grid/model-grid\";\r\nimport \"./step-two.scss\";\r\nimport IRate from \"../../store/interfaces/i-rate\";\r\nimport IRateTypeId from \"../../store/interfaces/i-rate-type-id\";\r\nimport {\r\n  carIdSelector,\r\n  carsSelector,\r\n  modelSelector,\r\n} from \"../../store/selectors\";\r\nimport ModelOptionEnum from \"./model-option-enum\";\r\nimport CustomRadio from \"../custom-radio/custom-radio\";\r\n\r\nconst StepTwo = () => {\r\n  const cars = useSelector(carsSelector);\r\n  const carId = useSelector(carIdSelector);\r\n  const storedCar = useSelector(modelSelector);\r\n  const dispatch = useDispatch();\r\n  const [modelOption, setModelOption] = useState(ModelOptionEnum.modelOption1);\r\n  const [filteredCars, setFilteredCars] = useState(cars);\r\n\r\n  const handleCardClick = useCallback(\r\n    (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      const target = e.target as HTMLDivElement;\r\n      const modelItem = target.closest(\".model-item\");\r\n      if (modelItem) {\r\n        const dataId = modelItem.getAttribute(\"data-id\");\r\n        if (!dataId) {\r\n          return;\r\n        }\r\n        const car = cars.find((car) => car.id === dataId);\r\n        if (car) {\r\n          if (car.id !== storedCar.id) {\r\n            dispatch(setColor(\"\"));\r\n            dispatch(setDateFrom(\"\"));\r\n            dispatch(setDateTo(\"\"));\r\n            dispatch(setRightWheel(false));\r\n            dispatch(setFullTank(false));\r\n            dispatch(setChildChair(false));\r\n            dispatch(\r\n              setRate({\r\n                price: 0,\r\n                rateTypeId: { name: \"\", unit: \"\" } as IRateTypeId,\r\n              } as IRate)\r\n            );\r\n            dispatch(changeStage(2));\r\n          }\r\n          dispatch(setModel(car));\r\n        }\r\n      }\r\n    },\r\n    [cars, dispatch, storedCar.id]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!cars || cars.length === 0) {\r\n      (async () => {\r\n        dispatch(fetchCars());\r\n      })();\r\n    }\r\n  }, [cars, dispatch]);\r\n\r\n  useEffect(() => {\r\n    setFilteredCars(cars);\r\n  }, [cars]);\r\n\r\n  useEffect(() => {\r\n    switch (modelOption) {\r\n      case ModelOptionEnum.modelOption1: {\r\n        setFilteredCars(cars);\r\n        break;\r\n      }\r\n      case ModelOptionEnum.modelOption2: {\r\n        const filteredCars = cars.filter(\r\n          (car) => car.categoryId.name === \"Эконом\"\r\n        );\r\n        setFilteredCars(filteredCars);\r\n        break;\r\n      }\r\n      case ModelOptionEnum.modelOption3: {\r\n        const filteredCars = cars.filter(\r\n          (car) => car.categoryId.name === \"Премиум\"\r\n        );\r\n        setFilteredCars(filteredCars);\r\n        break;\r\n      }\r\n      default: {\r\n        setFilteredCars(cars);\r\n      }\r\n    }\r\n  }, [cars, modelOption]);\r\n\r\n  const handleChangeValue = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setModelOption(Number.parseInt(e.target.id));\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (carId) {\r\n      dispatch(setAvailable(true));\r\n    } else {\r\n      dispatch(setAvailable(false));\r\n    }\r\n  }, [carId, dispatch]);\r\n  return (\r\n    <div className=\"model-container\">\r\n      <div onChange={handleChangeValue}>\r\n        <CustomRadio\r\n          name=\"modelType\"\r\n          id={ModelOptionEnum.modelOption1.toString()}\r\n          defaultChecked={true}\r\n          text=\"Все модели\"\r\n        />\r\n        <CustomRadio\r\n          name=\"modelType\"\r\n          id={ModelOptionEnum.modelOption2.toString()}\r\n          defaultChecked={false}\r\n          text=\"Эконом\"\r\n        />\r\n        <CustomRadio\r\n          name=\"modelType\"\r\n          id={ModelOptionEnum.modelOption3.toString()}\r\n          defaultChecked={false}\r\n          text=\"Премиум\"\r\n        />\r\n      </div>\r\n      <ModelGrid\r\n        filteredCars={filteredCars}\r\n        handleCardClick={handleCardClick}\r\n        carId={carId}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepTwo;\r\n","import React from \"react\";\r\nimport \"./custom-checkbox.scss\";\r\n\r\ninterface CustomCheckboxProps {\r\n  name: string;\r\n  id: string;\r\n  checked: boolean;\r\n  text: string;\r\n}\r\n\r\nconst CustomCheckbox = ({ id, name, checked, text }: CustomCheckboxProps) => {\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"checkbox\"\r\n        name={name}\r\n        id={id}\r\n        className=\"custom-checkbox\"\r\n        defaultChecked={checked}\r\n      />\r\n      <label htmlFor={id}>{text}</label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomCheckbox;\r\n","import React from \"react\";\r\nimport \"./additional-rate-picker.scss\";\r\nimport { OrderState } from \"../../store/orderReducer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport CustomCheckbox from \"../custom-checkbox/custom-checkbox\";\r\n\r\ninterface AdditionalRatePickerProps {\r\n  handleChangeValue: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\ninterface AdditionalRatePickerState {\r\n  order: OrderState;\r\n}\r\n\r\nconst isRightWheelSelector = (state: AdditionalRatePickerState) =>\r\n  state.order.isRightWheel;\r\nconst isNeedChildChairSelector = (state: AdditionalRatePickerState) =>\r\n  state.order.isNeedChildChair;\r\nconst isFullTankSelector = (state: AdditionalRatePickerState) =>\r\n  state.order.isFullTank;\r\n\r\nconst AdditionalRatePicker = ({\r\n  handleChangeValue,\r\n}: AdditionalRatePickerProps) => {\r\n  const isRightWheel = useSelector(isRightWheelSelector);\r\n  const isNeedChildChair = useSelector(isNeedChildChairSelector);\r\n  const isFullTank = useSelector(isFullTankSelector);\r\n  return (\r\n    <div className=\"additional-rate-picker_container\">\r\n      <label>Доп услуги</label>\r\n      <div className=\"additional-rate-picker\" onChange={handleChangeValue}>\r\n        <CustomCheckbox\r\n          id=\"service1\"\r\n          name=\"service1\"\r\n          checked={isFullTank}\r\n          text=\"Полный бак, 500р\"\r\n        />\r\n        <CustomCheckbox\r\n          id=\"service2\"\r\n          name=\"service2\"\r\n          checked={isNeedChildChair}\r\n          text=\"Детское кресло, 200р\"\r\n        />\r\n        <CustomCheckbox\r\n          id=\"service3\"\r\n          name=\"service3\"\r\n          checked={isRightWheel}\r\n          text=\"Правый руль, 1600р\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdditionalRatePicker;\r\n","import React, { useMemo } from \"react\";\r\nimport IRate from \"../../store/interfaces/i-rate\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { ModelState } from \"../../store/modelReducer\";\r\nimport \"./rate-picker.scss\";\r\nimport { OrderState } from \"../../store/orderReducer\";\r\nimport CustomRadio from \"../custom-radio/custom-radio\";\r\n\r\ninterface RatePickerProps {\r\n  handleChangeValue: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\ninterface RatePickerState {\r\n  model: ModelState;\r\n  order: OrderState;\r\n}\r\n\r\nconst ratesSelector = (state: RatePickerState) => state.model.rates;\r\nconst rateSelector = (state: RatePickerState) => state.order.rate;\r\n\r\nconst RatePicker = ({ handleChangeValue }: RatePickerProps) => {\r\n  const rates = useSelector(ratesSelector);\r\n  const selectedRate = useSelector(rateSelector);\r\n\r\n  const rateOptions = useMemo(() => {\r\n    return rates.map((rate: IRate, index) => {\r\n      const id = `rate${index}`;\r\n      return (\r\n        <React.Fragment key={id}>\r\n          <CustomRadio\r\n            id={id}\r\n            name=\"rate\"\r\n            defaultChecked={\r\n              selectedRate.rateTypeId.name === rate.rateTypeId.name\r\n            }\r\n            text={`${rate.rateTypeId.name}, ${rate.price}₽/${rate.rateTypeId.unit}`}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    });\r\n  }, [rates, selectedRate.rateTypeId.name]);\r\n\r\n  return (\r\n    <div className=\"rate-picker_container\">\r\n      <label>Тариф</label>\r\n      <div className=\"rate-picker\" onChange={handleChangeValue}>\r\n        {rateOptions}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RatePicker;\r\n","import React, { useMemo } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { ModelState } from \"../../store/modelReducer\";\r\nimport \"./color-picker.scss\";\r\nimport { OrderState } from \"../../store/orderReducer\";\r\nimport CustomRadio from \"../custom-radio/custom-radio\";\r\n\r\ninterface ColorPickerProps {\r\n  handleChangeValue: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\ninterface StepThreeState {\r\n  model: ModelState;\r\n  order: OrderState;\r\n}\r\n\r\nconst modelSelector = (state: StepThreeState) => state.model.model;\r\nconst colorSelector = (state: StepThreeState) => state.order.color;\r\n\r\nconst ColorPicker = ({ handleChangeValue }: ColorPickerProps) => {\r\n  const model = useSelector(modelSelector);\r\n  const selectedColor = useSelector(colorSelector);\r\n\r\n  const colorOptions = useMemo(() => {\r\n    const colors = model.colors;\r\n    const id = \"100\";\r\n    const colorOptionsTemplate = [\r\n      <React.Fragment key={id}>\r\n        <CustomRadio name=\"color\" id={id} defaultChecked={false} text=\"Любой\" />\r\n      </React.Fragment>,\r\n    ];\r\n    return colorOptionsTemplate.concat(\r\n      colors.map((color, index) => {\r\n        const id = index.toString();\r\n        return (\r\n          <React.Fragment key={id}>\r\n            <CustomRadio\r\n              name=\"color\"\r\n              id={id}\r\n              defaultChecked={selectedColor === color}\r\n              text={color}\r\n            />\r\n          </React.Fragment>\r\n        );\r\n      })\r\n    );\r\n  }, [model.colors, selectedColor]);\r\n\r\n  return (\r\n    <div className=\"color-picker_container\">\r\n      <label>Цвет</label>\r\n      <div className=\"color-picker\" onChange={handleChangeValue}>\r\n        {colorOptions}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ColorPicker;\r\n","import React, { useCallback } from \"react\";\r\nimport Datetime from \"react-datetime\";\r\nimport \"./date-time-picker.scss\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setDateFrom, setDateTo } from \"../../store/actions\";\r\nimport { OrderState } from \"../../store/orderReducer\";\r\nimport { Moment } from \"moment\";\r\n\r\ninterface DateTimePickerState {\r\n  order: OrderState;\r\n}\r\n\r\nconst dateFromSelector = (state: DateTimePickerState) => state.order.dateFrom;\r\nconst dateToSelector = (state: DateTimePickerState) => state.order.dateTo;\r\n\r\nconst DateTimePicker = () => {\r\n  const dispatch = useDispatch();\r\n  const startDate = useSelector(dateFromSelector);\r\n  const endDate = useSelector(dateToSelector);\r\n\r\n  const handleChangeStartDate = useCallback(\r\n    (date: string | Moment) => {\r\n      dispatch(setDateFrom(date));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleChangeEndDate = useCallback(\r\n    (date: string | Moment) => {\r\n      dispatch(setDateTo(date));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return (\r\n    <div className=\"date-time-picker_container\">\r\n      <label>Дата аренды</label>\r\n      <div className=\"date-time-picker\">\r\n        <div>\r\n          <label htmlFor=\"stateDate\">С</label>\r\n          <Datetime\r\n            value={startDate}\r\n            onChange={handleChangeStartDate}\r\n            dateFormat=\"DD.MM.YYYY\"\r\n            timeFormat=\"HH:mm\"\r\n            inputProps={{ placeholder: \"Введите дату и время\" }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"endDate\">По</label>\r\n          <Datetime\r\n            value={endDate}\r\n            onChange={handleChangeEndDate}\r\n            dateFormat=\"DD.MM.YYYY\"\r\n            timeFormat=\"HH:mm\"\r\n            inputProps={{ placeholder: \"Введите дату и время\" }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DateTimePicker;\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport \"./step-three.scss\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  fetchRates,\r\n  setAvailable,\r\n  setChildChair,\r\n  setColor,\r\n  setFullTank,\r\n  setRate,\r\n  setRightWheel,\r\n} from \"../../store/actions\";\r\nimport AdditionalRatePicker from \"../additional-rate-picker/additional-rate-picker\";\r\nimport RatePicker from \"../rate-picker/rate-picker\";\r\nimport ColorPicker from \"../color-picker/color-picker\";\r\nimport DateTimePicker from \"../date-time-picker/date-time-picker\";\r\nimport {\r\n  modelSelector,\r\n  orderSelector,\r\n  ratesSelector,\r\n} from \"../../store/selectors\";\r\n\r\nconst StepThree = () => {\r\n  const model = useSelector(modelSelector);\r\n  const rates = useSelector(ratesSelector);\r\n  const order = useSelector(orderSelector);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!rates?.length) {\r\n      (async () => {\r\n        dispatch(fetchRates());\r\n      })();\r\n    }\r\n  }, [dispatch, rates?.length]);\r\n\r\n  const handleColorChangeValue = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      let color = model.colors[parseInt(e.target.id)];\r\n      if (!color) {\r\n        color = model.colors[Math.floor(Math.random() * model.colors.length)];\r\n      }\r\n      dispatch(setColor(color));\r\n    },\r\n    [dispatch, model.colors]\r\n  );\r\n\r\n  const handleChangeAdditionalRateValue = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const rateId = e.target.id;\r\n      const value = e.target.checked;\r\n      switch (rateId) {\r\n        case \"service1\": {\r\n          dispatch(setFullTank(value));\r\n          break;\r\n        }\r\n        case \"service2\": {\r\n          dispatch(setChildChair(value));\r\n          break;\r\n        }\r\n        case \"service3\": {\r\n          dispatch(setRightWheel(value));\r\n          break;\r\n        }\r\n        default: {\r\n        }\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleChangeRateValue = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const id = e.target.id.replace(\"rate\", \"\");\r\n      const value = rates[Number.parseInt(id)];\r\n      dispatch(setRate(value));\r\n    },\r\n    [dispatch, rates]\r\n  );\r\n  useEffect(() => {\r\n    if (order.color && order.dateFrom && order.dateTo && order.price) {\r\n      dispatch(setAvailable(true));\r\n    } else {\r\n      dispatch(setAvailable(false));\r\n    }\r\n  }, [dispatch, order.color, order.dateFrom, order.dateTo, order.price]);\r\n\r\n  return (\r\n    <div className=\"addition-container\">\r\n      <form>\r\n        <ColorPicker handleChangeValue={handleColorChangeValue} />\r\n        <DateTimePicker />\r\n        <RatePicker handleChangeValue={handleChangeRateValue} />\r\n        <AdditionalRatePicker\r\n          handleChangeValue={handleChangeAdditionalRateValue}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepThree;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./step-four.scss\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { loadCarImage } from \"../../api/api-factory\";\r\nimport { modelSelector, orderSelector } from \"../../store/selectors\";\r\n\r\nconst StepFour = () => {\r\n  const model = useSelector(modelSelector);\r\n  const order = useSelector(orderSelector);\r\n\r\n  const [imgSrc, setImgSrc] = useState(\"\");\r\n  useEffect(() => {\r\n    loadCarImage(model.thumbnail.path).then((blob) => {\r\n      setImgSrc(URL.createObjectURL(blob));\r\n    });\r\n  }, [model.thumbnail.path]);\r\n  return (\r\n    <div className=\"total-container\">\r\n      <div className=\"total-card\">\r\n        <h4>{model.name}</h4>\r\n        {model.number ? (\r\n          <div className=\"model-number\">{model.number}</div>\r\n        ) : null}\r\n        {order.isFullTank ? (\r\n          <p>\r\n            <b>Топливо</b> 100%\r\n          </p>\r\n        ) : null}\r\n        <p>\r\n          <b>Доступна с</b> {order.dateFrom?.format(\"DD.MM.YYYY HH:mm\")}\r\n        </p>\r\n      </div>\r\n      <img src={imgSrc} alt=\"car\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepFour;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport Header from \"../../header/header\";\r\nimport \"./order-page.scss\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport StepOne from \"../../step-one/step-one\";\r\nimport OrderDetails from \"../../order-details/order-details\";\r\nimport StepTwo from \"../../step-two/step-two\";\r\nimport StepThree from \"../../step-three/step-three\";\r\nimport StepFour from \"../../step-four/step-four\";\r\nimport { OrderState } from \"../../../store/orderReducer\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\ninterface OrderPageState {\r\n  order: OrderState;\r\n}\r\n\r\nconst stageSelector = (state: OrderPageState) => state.order.stage;\r\n\r\nconst OrderPage = () => {\r\n  const stage = useSelector(stageSelector);\r\n  const [tabIndex, setTabIndex] = useState(stage - 1);\r\n\r\n  useEffect(() => {\r\n    setTabIndex(stage - 1);\r\n  }, [stage]);\r\n\r\n  const handleTabSelect = useCallback((index) => {\r\n    setTabIndex(index);\r\n  }, []);\r\n  return (\r\n    <div className=\"order-page-container\">\r\n      <Header />\r\n      <Tabs selectedIndex={tabIndex} onSelect={handleTabSelect}>\r\n        <div className=\"order-nav-bar-container\">\r\n          <TabList className=\"order-nav-bar\">\r\n            <Tab\r\n              className=\"tab-button link\"\r\n              default\r\n              selectedClassName=\"link__accent\"\r\n            >\r\n              Местоположение\r\n            </Tab>\r\n            <Tab\r\n              className=\"tab-button link\"\r\n              selectedClassName=\"link__accent\"\r\n              disabledClassName=\"link__disabled\"\r\n              disabled={stage < 2}\r\n              selected={stage === 2}\r\n            >\r\n              Модель\r\n            </Tab>\r\n            <Tab\r\n              className=\"tab-button link\"\r\n              disabled={stage < 3}\r\n              disabledClassName=\"link__disabled\"\r\n              selectedClassName=\"link__accent\"\r\n              selected={stage === 3}\r\n            >\r\n              Дополнительно\r\n            </Tab>\r\n            <Tab\r\n              className=\"tab-button link\"\r\n              disabled={stage < 4}\r\n              disabledClassName=\"link__disabled\"\r\n              selectedClassName=\"link__accent\"\r\n              selected={stage === 4}\r\n            >\r\n              Итого\r\n            </Tab>\r\n          </TabList>\r\n        </div>\r\n        <TabPanel className=\"react-tabs__tab-panel\">\r\n          <main className=\"order-container\">\r\n            <StepOne />\r\n            <OrderDetails stage={1} />\r\n          </main>\r\n        </TabPanel>\r\n        <TabPanel>\r\n          <main className=\"order-container\">\r\n            <StepTwo />\r\n            <OrderDetails stage={2} />\r\n          </main>\r\n        </TabPanel>\r\n        <TabPanel>\r\n          <main className=\"order-container\">\r\n            <StepThree />\r\n            <OrderDetails stage={3} />\r\n          </main>\r\n        </TabPanel>\r\n        <TabPanel>\r\n          <main className=\"order-container\">\r\n            <StepFour />\r\n            <OrderDetails stage={4} />\r\n          </main>\r\n        </TabPanel>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderPage;\r\n","import React from \"react\";\r\nimport \"./burger-menu.scss\";\r\nimport classNames from \"classnames\";\r\n\r\ninterface IBurger {\r\n  isActive: boolean;\r\n  changeActive: () => void;\r\n}\r\n\r\nconst BurgerMenu = ({ isActive, changeActive }: IBurger) => {\r\n  const buttonClass = classNames(\"burger-menu\", {\r\n    \"burger-menu__active\": isActive,\r\n  });\r\n  return (\r\n    <button className={buttonClass} onClick={changeActive}>\r\n      <div />\r\n      <div />\r\n      <div />\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default BurgerMenu;\r\n","import React from \"react\";\r\nimport \"./menu.scss\";\r\n\r\ninterface IMenu {\r\n  isOpen: boolean;\r\n}\r\n\r\nconst Menu = (props: IMenu) => {\r\n  const { isOpen } = props;\r\n  return (\r\n    <nav className={`modal ${isOpen ? \"modal__active\" : \"\"}`}>\r\n      <ul className=\"modal_menu menu\">\r\n        <li>\r\n          <a href=\"#\" target=\"_blank\">\r\n            Парковка\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href=\"#\" target=\"_blank\">\r\n            Страховка\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href=\"#\" target=\"_blank\">\r\n            Бензин\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href=\"#\" target=\"_blank\">\r\n            Обслуживание\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <ul className=\"menu menu__horizontal\">\r\n            <li>\r\n              <a href=\"#\" target=\"_blank\">\r\n                <span className=\"telegram\" />\r\n              </a>\r\n            </li>\r\n            <li>\r\n              <a href=\"#\" target=\"_blank\">\r\n                <span className=\"facebook\" />\r\n              </a>\r\n            </li>\r\n            <li>\r\n              <a href=\"#\" target=\"_blank\">\r\n                <span className=\"instagram\" />\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Header from \"../../header/header\";\r\nimport \"./final-page.scss\";\r\nimport OrderDetails from \"../../order-details/order-details\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getOrder, loadCarImage } from \"../../../api/api-factory\";\r\nimport {\r\n  setAvailable,\r\n  setChildChair,\r\n  setCity,\r\n  setColor,\r\n  setDateFrom,\r\n  setDateTo,\r\n  setFullTank,\r\n  setModel,\r\n  setPoint,\r\n  setPrice,\r\n  setRate,\r\n  setRightWheel,\r\n} from \"../../../store/actions\";\r\nimport moment from \"moment\";\r\nimport { modelSelector, orderSelector } from \"../../../store/selectors\";\r\n\r\ninterface FinalPageParams {\r\n  orderId: string;\r\n}\r\n\r\nconst FinalPage = () => {\r\n  const model = useSelector(modelSelector);\r\n  const order = useSelector(orderSelector);\r\n  const dispatch = useDispatch();\r\n  const { orderId }: FinalPageParams = useParams();\r\n\r\n  const [imgSrc, setImgSrc] = useState(\"\");\r\n  useEffect(() => {\r\n    loadCarImage(model.thumbnail.path).then((blob) => {\r\n      setImgSrc(URL.createObjectURL(blob));\r\n    });\r\n  }, [model.thumbnail.path]);\r\n\r\n  useEffect(() => {\r\n    if (!order.price) {\r\n      getOrder(orderId).then((res) => {\r\n        const data = res.data;\r\n        dispatch(setColor(data.color));\r\n        dispatch(setDateFrom(moment(data.dateFrom)));\r\n        dispatch(setDateTo(moment(data.dateTo)));\r\n        dispatch(setFullTank(data.isFullTank));\r\n        dispatch(setChildChair(data.isNeedChildChair));\r\n        dispatch(setRightWheel(data.isRightWheel));\r\n        dispatch(setPrice(data.price));\r\n        dispatch(setCity(data.cityId));\r\n        dispatch(setModel(data.carId));\r\n        dispatch(setPoint(data.pointId));\r\n        dispatch(setRate(data.rateId));\r\n        dispatch(setAvailable(true));\r\n      });\r\n    }\r\n  }, [dispatch, orderId]);\r\n\r\n  return (\r\n    <div className=\"order-page-container\">\r\n      <Header />\r\n      <div className=\"order-nav-bar-container\">\r\n        <div className=\"order-nav-bar\">Заказ номер {orderId}</div>\r\n      </div>\r\n      <main className=\"order-container\">\r\n        <div className=\"total-container\">\r\n          <div className=\"total-card\">\r\n            <h2>Ваш заказ подтверждён</h2>\r\n            <h4>{model.name}</h4>\r\n            {model.number ? (\r\n              <div className=\"model-number\">{model.number}</div>\r\n            ) : null}\r\n            {order.isFullTank ? (\r\n              <p>\r\n                <b>Топливо</b> 100%\r\n              </p>\r\n            ) : null}\r\n            <p>\r\n              <b>Доступна с</b> {order.dateFrom?.format(\"DD.MM.YYYY HH:mm\")}\r\n            </p>\r\n          </div>\r\n          <img src={imgSrc} alt=\"car\" />\r\n        </div>\r\n        <OrderDetails stage={5} />\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinalPage;\r\n","import React, { useCallback, useState } from \"react\";\nimport \"./App.scss\";\nimport StartPage from \"./components/pages/start-page/start-page\";\nimport { Route, Switch } from \"react-router-dom\";\nimport OrderPage from \"./components/pages/order-page/order-page\";\nimport BurgerMenu from \"./components/burger-menu/burger-menu\";\nimport Menu from \"./components/menu/menu\";\nimport FinalPage from \"./components/pages/final-page/final-page\";\n\nfunction App() {\n  const [showMenu, setShowMenu] = useState(false);\n\n  const changeActive = useCallback(() => {\n    setShowMenu((prev: boolean) => !prev);\n  }, [setShowMenu]);\n\n  return (\n    <div className=\"container\">\n      <Menu isOpen={showMenu} />\n      <aside className=\"side-bar\">\n        <BurgerMenu isActive={showMenu} changeActive={changeActive} />\n        <button className=\"language-btn\">Eng</button>\n      </aside>\n      <Switch>\n        <Route exact path=\"/car-sharing/\" component={StartPage} />\n        <Route exact path=\"/car-sharing/order\" component={OrderPage} />\n        <Route path=\"/car-sharing/order/:orderId\" component={FinalPage} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import { FETCH_CITIES, FETCH_POINTS, SET_POINT, SET_CITY } from \"./types\";\r\nimport ICity from \"./interfaces/i-city\";\r\nimport IPoint from \"./interfaces/i-point\";\r\nimport IAction from \"./interfaces/i-action\";\r\n\r\nconst initialState: LocationState = {\r\n  city: {\r\n    name: \"\",\r\n    id: \"\",\r\n  },\r\n  point: {\r\n    id: \"\",\r\n    name: \"\",\r\n    address: \"\",\r\n    cityId: {\r\n      id: \"\",\r\n    },\r\n  },\r\n  cities: [],\r\n  points: [],\r\n};\r\n\r\nexport interface LocationState {\r\n  city: ICity;\r\n  point: IPoint;\r\n  cities: ICity[];\r\n  points: IPoint[];\r\n}\r\n\r\nconst locationReducer = (state = initialState, action: IAction) => {\r\n  switch (action.type) {\r\n    case SET_CITY: {\r\n      return {\r\n        ...state,\r\n        city: action.payload,\r\n      };\r\n    }\r\n    case SET_POINT: {\r\n      return {\r\n        ...state,\r\n        point: action.payload,\r\n      };\r\n    }\r\n    case FETCH_CITIES: {\r\n      return {\r\n        ...state,\r\n        cities: action.payload,\r\n      };\r\n    }\r\n    case FETCH_POINTS: {\r\n      return {\r\n        ...state,\r\n        points: action.payload,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default locationReducer;\r\n","import { FETCH_CARS, FETCH_RATES, SET_MODEL } from \"./types\";\r\nimport ICar from \"./interfaces/i-car\";\r\nimport IAction from \"./interfaces/i-action\";\r\nimport IRate from \"./interfaces/i-rate\";\r\n\r\nconst initialState: ModelState = {\r\n  model: {\r\n    id: \"\",\r\n    colors: [],\r\n    name: \"\",\r\n    description: \"\",\r\n    number: \"\",\r\n    priceMax: 0,\r\n    priceMin: 0,\r\n    tank: 0,\r\n    thumbnail: {\r\n      mimetype: \"\",\r\n      originalname: \"\",\r\n      path: \"\",\r\n    },\r\n    categoryId: {\r\n      description: \"\",\r\n      name: \"\",\r\n      id: \"\",\r\n    },\r\n  },\r\n  cars: [],\r\n  rates: [],\r\n};\r\n\r\nexport interface ModelState {\r\n  model: ICar;\r\n  cars: ICar[];\r\n  rates: IRate[];\r\n}\r\n\r\nconst modelReducer = (state: ModelState = initialState, action: IAction) => {\r\n  switch (action.type) {\r\n    case FETCH_CARS: {\r\n      return {\r\n        ...state,\r\n        cars: action.payload,\r\n      };\r\n    }\r\n    case FETCH_RATES: {\r\n      return {\r\n        ...state,\r\n        rates: action.payload,\r\n      };\r\n    }\r\n    case SET_MODEL: {\r\n      return {\r\n        ...state,\r\n        model: action.payload,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default modelReducer;\r\n","import {\r\n  CHANGE_STAGE,\r\n  SET_AVAILABLE,\r\n  SET_CHILD_CHAIR,\r\n  SET_COLOR,\r\n  SET_DATE_FROM,\r\n  SET_DATE_TO,\r\n  SET_FULL_TANK,\r\n  SET_PRICE,\r\n  SET_RATE,\r\n  SET_RIGHT_WHEEL,\r\n} from \"./types\";\r\nimport IAction from \"./interfaces/i-action\";\r\nimport IRate from \"./interfaces/i-rate\";\r\nimport { Moment } from \"moment\";\r\n\r\nconst initialState: OrderState = {\r\n  color: \"\",\r\n  isFullTank: false,\r\n  isNeedChildChair: false,\r\n  isRightWheel: false,\r\n  price: 0,\r\n  rate: {\r\n    id: \"\",\r\n    price: 0,\r\n    rateTypeId: {\r\n      name: \"\",\r\n      unit: \"\",\r\n    },\r\n  },\r\n  stage: 1,\r\n  available: false,\r\n};\r\n\r\nexport interface OrderState {\r\n  color: string;\r\n  dateFrom?: Moment;\r\n  dateTo?: Moment;\r\n  price: number;\r\n  isFullTank: boolean;\r\n  isNeedChildChair: boolean;\r\n  isRightWheel: boolean;\r\n  rate: IRate;\r\n  stage: number;\r\n  available: boolean;\r\n}\r\n\r\nconst orderReducer = (state: OrderState = initialState, action: IAction) => {\r\n  switch (action.type) {\r\n    case SET_COLOR: {\r\n      return {\r\n        ...state,\r\n        color: action.payload,\r\n      };\r\n    }\r\n    case SET_PRICE: {\r\n      return {\r\n        ...state,\r\n        price: action.payload,\r\n      };\r\n    }\r\n    case SET_RATE: {\r\n      return {\r\n        ...state,\r\n        rate: action.payload,\r\n      };\r\n    }\r\n    case SET_FULL_TANK: {\r\n      return {\r\n        ...state,\r\n        isFullTank: action.payload,\r\n      };\r\n    }\r\n    case SET_CHILD_CHAIR: {\r\n      return {\r\n        ...state,\r\n        isNeedChildChair: action.payload,\r\n      };\r\n    }\r\n    case SET_RIGHT_WHEEL: {\r\n      return {\r\n        ...state,\r\n        isRightWheel: action.payload,\r\n      };\r\n    }\r\n    case SET_DATE_FROM: {\r\n      return {\r\n        ...state,\r\n        dateFrom: action.payload,\r\n      };\r\n    }\r\n    case SET_DATE_TO: {\r\n      return {\r\n        ...state,\r\n        dateTo: action.payload,\r\n      };\r\n    }\r\n    case SET_AVAILABLE: {\r\n      return {\r\n        ...state,\r\n        available: action.payload,\r\n      };\r\n    }\r\n    case CHANGE_STAGE: {\r\n      if (typeof action.payload === \"number\") {\r\n        return {\r\n          ...state,\r\n          stage: action.payload,\r\n        };\r\n      } else {\r\n        return state;\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default orderReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport locationReducer from \"./locationReducer\";\r\nimport modelReducer from \"./modelReducer\";\r\nimport orderReducer from \"./orderReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  location: locationReducer,\r\n  model: modelReducer,\r\n  order: orderReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./rootReducer\";\r\n\r\nconst store = createStore(rootReducer, compose(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}